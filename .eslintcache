[{"C:\\portfolio\\ascii-ecommerce\\src\\index.js":"1","C:\\portfolio\\ascii-ecommerce\\src\\App.js":"2","C:\\portfolio\\ascii-ecommerce\\src\\components\\ProductCard\\ProductCard.jsx":"3","C:\\portfolio\\ascii-ecommerce\\src\\components\\ProductCard\\styles.js":"4","C:\\portfolio\\ascii-ecommerce\\src\\components\\ProductCards\\ProductCards.jsx":"5","C:\\portfolio\\ascii-ecommerce\\src\\components\\ProductCards\\styles.js":"6","C:\\portfolio\\ascii-ecommerce\\src\\api\\client.js":"7","C:\\portfolio\\ascii-ecommerce\\src\\api\\products.js":"8","C:\\portfolio\\ascii-ecommerce\\src\\ads\\randomAd.js":"9","C:\\portfolio\\ascii-ecommerce\\src\\styles.js":"10","C:\\portfolio\\ascii-ecommerce\\src\\components\\NavBar\\NavBar.jsx":"11","C:\\portfolio\\ascii-ecommerce\\src\\components\\NavBar\\styles.js":"12","C:\\portfolio\\ascii-ecommerce\\src\\util\\dataFormat.js":"13","C:\\portfolio\\ascii-ecommerce\\src\\components\\SortMenu.jsx":"14"},{"size":410,"mtime":1607155308207,"results":"15","hashOfConfig":"16"},{"size":3502,"mtime":1607266569143,"results":"17","hashOfConfig":"16"},{"size":2063,"mtime":1607233785963,"results":"18","hashOfConfig":"16"},{"size":546,"mtime":1607227365442,"results":"19","hashOfConfig":"16"},{"size":809,"mtime":1607265526506,"results":"20","hashOfConfig":"16"},{"size":150,"mtime":1607226730440,"results":"21","hashOfConfig":"16"},{"size":144,"mtime":1607155068973,"results":"22","hashOfConfig":"16"},{"size":159,"mtime":1607232420429,"results":"23","hashOfConfig":"16"},{"size":342,"mtime":1607181423882,"results":"24","hashOfConfig":"16"},{"size":307,"mtime":1607226715083,"results":"25","hashOfConfig":"16"},{"size":665,"mtime":1607232406856,"results":"26","hashOfConfig":"16"},{"size":203,"mtime":1607226903637,"results":"27","hashOfConfig":"16"},{"size":509,"mtime":1607234637581,"results":"28","hashOfConfig":"16"},{"size":1416,"mtime":1607234729239,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"urnfbo",{"filePath":"33","messages":"34","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"32"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"C:\\portfolio\\ascii-ecommerce\\src\\index.js",[],["61","62"],"C:\\portfolio\\ascii-ecommerce\\src\\App.js",["63","64","65"],"import { useEffect, useState, useRef, useCallback } from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Typography from \"@material-ui/core/Typography\";\n\nimport ProductCards from \"./components/ProductCards/ProductCards\";\nimport NavBar from \"./components/NavBar/NavBar\";\nimport { getAd } from \"./ads/randomAd\";\nimport { getProducts } from \"./api/products\";\nimport { uppercaseFirstLetter } from \"../src/util/dataFormat\";\nimport useStyles from \"./styles\";\n\nconst App = () => {\n  const [products, setProducts] = useState([]);\n  const [cacheProducts, setCacheProducts] = useState([]);\n  const [sort, setSort] = useState(\"size\");\n  const [pageNumber, setPageNumber] = useState(0);\n  const [adApperanceCounter, setAdAppearanceCounter] = useState(0);\n  const [end, setEnd] = useState(false);\n  const [loading, setIsLoading] = useState(false);\n\n  // save reference to last product\n  const observer = useRef();\n  const lastProductRef = useCallback(\n    (node) => {\n      if (loading) return;\n      if (observer.current) observer.current.disconnect();\n      observer.current = new IntersectionObserver((entries) => {\n        if (entries[0].isIntersecting || entries[1]?.isIntersecting) {\n          setPageNumber(pageNumber + 1);\n        }\n      });\n      if (node) observer.current.observe(node);\n    },\n    [loading]\n  );\n\n  useEffect(() => {\n    setEnd(false);\n    setAdAppearanceCounter(0);\n    getInitialProducts();\n  }, [sort]);\n\n  useEffect(() => {\n    if (products.length === 0) return;\n    if (!end) getMoreProducts();\n    const cached = cacheProducts.splice(0, cacheProducts.length);\n    setProducts([...products, ...cached]);\n  }, [pageNumber]);\n\n  const getInitialProducts = async () => {\n    setIsLoading(true);\n    setProducts([]);\n    setPageNumber(0);\n    try {\n      const { data } = await getProducts(sort, 0);\n      setProducts([...data, ...getAd()]);\n      setAdAppearanceCounter(0 + data.length);\n      setPageNumber(1);\n      if (data.length < 20) setEnd(true);\n    } catch (err) {\n      console.log(err.response);\n    }\n    setIsLoading(false);\n  };\n\n  const getMoreProducts = async () => {\n    setIsLoading(true);\n    try {\n      const { data } = await getProducts(sort, pageNumber);\n      setAdAppearanceCounter(adApperanceCounter + data.length);\n      if (Number.isInteger(adApperanceCounter / 20) && data.length === 20) {\n        setCacheProducts([...data, ...getAd()]);\n      } else {\n        setCacheProducts(data);\n      }\n      if (data.length < 20) setEnd(true);\n    } catch (err) {\n      console.log(err.response);\n    }\n\n    setIsLoading(false);\n  };\n\n  const classes = useStyles();\n\n  return (\n    <div>\n      <NavBar setSort={setSort} />\n      <div className={classes.container}>\n        <Typography variant=\"h6\" color=\"textPrimary\" component=\"p\">\n          Sort by: {uppercaseFirstLetter(sort)}\n        </Typography>\n        {products.length > 0 && (\n          <ProductCards products={products} lastProductRef={lastProductRef} />\n        )}\n        {loading && (\n          <div\n            className={\n              products.length > 0 ? classes.center : classes.initialLoad\n            }\n          >\n            <CircularProgress />\n          </div>\n        )}\n        {end && (\n          <div className={classes.center}>\n            <Typography variant=\"body1\" color=\"textSecondary\" component=\"p\">\n              ~ end of catalogue ~\n            </Typography>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","C:\\portfolio\\ascii-ecommerce\\src\\components\\ProductCard\\ProductCard.jsx",[],"C:\\portfolio\\ascii-ecommerce\\src\\components\\ProductCard\\styles.js",[],["66","67"],"C:\\portfolio\\ascii-ecommerce\\src\\components\\ProductCards\\ProductCards.jsx",[],"C:\\portfolio\\ascii-ecommerce\\src\\components\\ProductCards\\styles.js",[],"C:\\portfolio\\ascii-ecommerce\\src\\api\\client.js",[],"C:\\portfolio\\ascii-ecommerce\\src\\api\\products.js",[],"C:\\portfolio\\ascii-ecommerce\\src\\ads\\randomAd.js",[],"C:\\portfolio\\ascii-ecommerce\\src\\styles.js",[],"C:\\portfolio\\ascii-ecommerce\\src\\components\\NavBar\\NavBar.jsx",[],"C:\\portfolio\\ascii-ecommerce\\src\\components\\NavBar\\styles.js",[],"C:\\portfolio\\ascii-ecommerce\\src\\util\\dataFormat.js",[],"C:\\portfolio\\ascii-ecommerce\\src\\components\\SortMenu.jsx",[],{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","severity":1,"message":"73","line":34,"column":5,"nodeType":"74","endLine":34,"endColumn":14,"suggestions":"75"},{"ruleId":"72","severity":1,"message":"76","line":41,"column":6,"nodeType":"74","endLine":41,"endColumn":12,"suggestions":"77"},{"ruleId":"72","severity":1,"message":"78","line":48,"column":6,"nodeType":"74","endLine":48,"endColumn":18,"suggestions":"79"},{"ruleId":"68","replacedBy":"80"},{"ruleId":"70","replacedBy":"81"},"no-native-reassign",["82"],"no-negated-in-lhs",["83"],"react-hooks/exhaustive-deps","React Hook useCallback has a missing dependency: 'pageNumber'. Either include it or remove the dependency array. You can also do a functional update 'setPageNumber(p => ...)' if you only need 'pageNumber' in the 'setPageNumber' call.","ArrayExpression",["84"],"React Hook useEffect has a missing dependency: 'getInitialProducts'. Either include it or remove the dependency array.",["85"],"React Hook useEffect has missing dependencies: 'cacheProducts', 'end', 'getMoreProducts', and 'products'. Either include them or remove the dependency array. You can also do a functional update 'setProducts(p => ...)' if you only need 'products' in the 'setProducts' call.",["86"],["82"],["83"],"no-global-assign","no-unsafe-negation",{"desc":"87","fix":"88"},{"desc":"89","fix":"90"},{"desc":"91","fix":"92"},"Update the dependencies array to be: [loading, pageNumber]",{"range":"93","text":"94"},"Update the dependencies array to be: [getInitialProducts, sort]",{"range":"95","text":"96"},"Update the dependencies array to be: [cacheProducts, end, getMoreProducts, pageNumber, products]",{"range":"97","text":"98"},[1332,1341],"[loading, pageNumber]",[1449,1455],"[getInitialProducts, sort]",[1665,1677],"[cacheProducts, end, getMoreProducts, pageNumber, products]"]